####################
# Send and receive #
####################

source "pass Accounts/GMail/mutt |"

set folder = "imaps://imap.gmail.com/"
set spoolfile = +INBOX
set imap_check_subscribed

set smtp_url = "smtps://$imap_user@smtp.gmail.com"
set smtp_pass = $imap_pass
set smtp_authenticators = "plain"
set ssl_force_tls = yes

# Composition settings
set realname = 'Henri Menke'
set from = $imap_user
set use_from = yes
set send_charset="utf-8"
set assumed_charset="iso-8859-1"
set editor="nvim -c 'set syntax=mail ft=mail enc=utf-8'"
set fast_reply = yes
set include = yes
set forward_quote = yes

# Activate caching, as it can greatly improve speed
set header_cache = "~/.mutt/cache/headers"
set message_cachedir = "~/.mutt/cache/bodies"

# Specify where to save and/or look for postponed and sent messages.
set postponed = "+[Gmail]/Drafts"
set record = "+[Gmail]/Sent Mail"

# Allow Mutt to open a new IMAP connection automatically.
unset imap_passive

# Keep the IMAP connection alive by polling intermittently (time in seconds).
set imap_keepalive = 300

# How often to check for new mail (time in seconds).
set mail_check = 120

#################
# Miscellaneous #
#################

# Let's see when I will regret this
set delete
unset confirmappend
set quit

# Edit headers in editor
set edit_headers = yes

# do not show all headers, just a few
ignore *
unignore From To Cc Bcc Date Subject
# and in this order
unhdr_order *
hdr_order From: To: Cc: Bcc: Date: Subject:

# brighten up stuff with colors, for more coloring examples see:
# http://aperiodic.net/phil/configs/mutt/colors
color normal      white          black
color hdrdefault  green          default
color quoted      green          default
color quoted1     yellow         default
color quoted2     red            default
color signature   cyan           default
color indicator   brightyellow   red
color error       brightred      default
color status      brightwhite    blue
color tree        brightmagenta  black
color tilde       blue           default
color attachment  brightyellow   default
color markers     brightred      default
color message     white          black
color search      brightwhite    magenta
color bold        brightyellow   default
color progress    white          black

# Index
set date_format = "!%d/%m/%Y, %H:%M:%S"
set index_format = '%4C [%Z] %D %-25.25L (%?l?%4l&%4c?) %s'

# Keybindings
bind index,pager R group-reply
bind index <space> collapse-thread
bind index G imap-fetch-mail
macro index,pager S "<save-message>=[Gmail]/Spam<enter>" "file as Spam"

####################
# Neomutt settings #
####################

# Trash folder
set trash = "+[Gmail]/Bin"

# Sidebar
set mail_check_stats
set sidebar_visible = yes
set sidebar_width = 36
set sidebar_short_path
set sidebar_delim_chars="/"
set sidebar_folder_indent
set sidebar_indent_string="  "
set sidebar_format = '%B%?F? [%F]?%* %?N?%N/?%S'
bind index,pager \Ck sidebar-prev
bind index,pager \Cj sidebar-next
bind index,pager o sidebar-open
