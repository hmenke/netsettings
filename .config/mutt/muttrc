## Colors for mutt by Luke Smith
####################
# Send and receive #
####################

#source "pass Accounts/GMail/mutt |"
#set folder = "imaps://imap.gmail.com/"

source "python ~/.config/offlineimap/credentials.py imap.gmail.com |"
set mbox_type = Maildir
set folder = ~/.local/share/offlineimap
source ~/.config/mutt/mbnames

set spoolfile = +INBOX
set imap_check_subscribed

set smtp_url = "smtps://$imap_user@smtp.gmail.com"
set smtp_pass = $imap_pass
set smtp_authenticators = "plain"
set ssl_force_tls = yes

# Composition settings
set realname = 'Henri Menke'
set from = $imap_user
set use_from = yes
set send_charset="utf-8"
set assumed_charset="iso-8859-1"
set editor="nvim -c 'set syntax=mail ft=mail enc=utf-8'"
set fast_reply = yes
set include = yes
set forward_quote = yes

# Activate caching, as it can greatly improve speed
set header_cache = "~/.mutt/cache/headers"
set message_cachedir = "~/.mutt/cache/bodies"

# Specify where to save and/or look for postponed and sent messages.
set postponed = "+[Gmail]/Drafts"
unset record # GMail copies to Sent automatically

# Allow Mutt to open a new IMAP connection automatically.
unset imap_passive

# Keep the IMAP connection alive by polling intermittently (time in seconds).
set imap_keepalive = 300

# How often to check for new mail (time in seconds).
set mail_check = 600

#################
# Miscellaneous #
#################

# Let's see when I will regret this
set delete
unset confirmappend
set quit

# Just marking as new is sufficient for me
set mark_old = no

# Edit headers in editor
set edit_headers = yes

# Threaded view
set sort=threads

# do not show all headers, just a few
ignore *
unignore From To Cc Bcc Date Subject
# and in this order
unhdr_order *
hdr_order From: To: Cc: Bcc: Date: Subject:

# Colors for mutt by Luke Smith
source colors.muttrc

# Index
set date_format = "!%d/%m/%Y, %H:%M:%S"
set index_format = '%4C [%Z] %D %-25.25L (%?l?%4l&%4c?) %s'

# Keybindings
bind index,pager R group-reply
bind index <space> collapse-thread
bind index G imap-fetch-mail
macro index,pager S "<save-message>=[Gmail]/Spam<enter>" "file as Spam"
bind pager <up> previous-line
bind pager <down> next-line

####################
# Neomutt settings #
####################

# Trash folder
set trash = "+[Gmail]/Bin"

# Sidebar
set mail_check_stats
set sidebar_visible = yes
set sidebar_width = 36
set sidebar_short_path
set sidebar_delim_chars="/"
set sidebar_folder_indent
set sidebar_indent_string="  "
set sidebar_format = '%B%?F? [%F]?%* %?N?%N/?%S'
bind index,pager \Ck sidebar-prev
bind index,pager \Cj sidebar-next
bind index,pager o sidebar-open
